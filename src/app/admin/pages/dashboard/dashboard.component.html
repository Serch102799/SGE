<div class="dashboard-container">
  <h1>Bienvenido al Dashboard de Almacén</h1>

  <div class="card-grid">
    <div class="dashboard-card">
      <div class="dashboard-card-header"><h3>Total de Refacciones</h3></div>
      <p style="font-size: 2.5rem; text-align: center;">
        {{ refacciones.length }}
      </p>
    </div>

    <div class="dashboard-card">
      <div class="dashboard-card-header"><h3>Refacciones con Stock Bajo</h3></div>
      <p style="font-size: 2.5rem; text-align: center; color: #ff3333;">
        {{ getRefaccionesConStockBajo().length }}
      </p>
      <button class="dashboard-btn" *ngIf="getRefaccionesConStockBajo().length > 0">Ver Detalle</button>
    </div>

    </div>

  <div *ngIf="isLoading" class="info-message">
    <p>Cargando inventario de refacciones...</p>
    </div>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
    <button class="dashboard-btn" (click)="cargarRefacciones()">Reintentar Carga</button>
  </div>

  <ng-container *ngIf="!isLoading && !errorMessage">
    <h2 *ngIf="refacciones.length > 0">Inventario General</h2>

    <div class="dashboard-table-container" *ngIf="refacciones.length > 0">
      <table class="dashboard-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Categoría</th>
            <th>Marca</th>
            <th>Stock Actual</th>
            <th>Stock Mínimo</th>
            <th>Ubicación</th>
            <th>Precio Costo</th>
            </tr>
        </thead>
        <tbody>
          <tr *ngFor="let refaccion of refacciones">
            <td>{{ refaccion.nombre }}</td>
            <td>{{ refaccion.categoria }}</td>
            <td>{{ refaccion.marca }}</td>
            <td>{{ refaccion.stock_actual }}</td>
            <td>{{ refaccion.stock_minimo }}</td>
            <td>{{ refaccion.ubicacion_almacen }}</td>
            <td>${{ refaccion.precio_costo | number:'1.2-2' }}</td> </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="refacciones.length === 0" class="info-message">
      <p>No hay refacciones registradas en el inventario o no se encontraron datos.</p>
    </div>
  </ng-container>

  </div>